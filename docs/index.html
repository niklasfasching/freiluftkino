<!DOCTYPE html>
<html>
  <head>
    <title>freiluftkino</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/x-template" id="x-flk">
      <div ..show ..bookable="show.bookable" .for="show of $.shows">
        <img src="{show.img}">
        <div ..info>
          <div ..title><a href="{show.url}">{show.title}</a></div>
          <div ..cinema><a href="{show.cinemaUrl}">{show.cinemaName}</a></div>
          <div>
            <div ..date>{show.date} {show.time}</div>
            <div ..seats .if="show.available || show.reserved">Seats: {show.available} available / {show.reserved} reserved </div>
          </div>
        </div>
      </div>
    </script>
    <script type="module">
     import {mount, define, Component} from "https://niklasfasching.github.io/xminus/src/runtime.mjs";
     define("x-flk", class extends Component {
       async onInit() {
         this.shows = [];
         const showsByCinema = await fetch("./showsByCinema.json").then(r => r.json());
         this.shows = Object.values(showsByCinema).flat().sort((a, b) => a.timestamp - b.timestamp);


         this.update();
       }
     });
     mount(document.body, "x-flk")
    </script>
  </head>
  <style>
   html { box-sizing: border-box; }
   *, *:before, *:after { box-sizing: inherit; }

   html, body {
     width: 100%;
     height: 100%;
     margin: 0;
   }

   x-flk {
     display: grid;

   }

   .show {
     display: flex;
     height: 50vh;
     margin-bottom: 1em;
     border: 1px solid #bbb;
     box-shadow: 0.25em 0.25em 2em 0.1em #bbb;
     border-radius: 0.25em;
     overflow: hidden;
   }

   .show:not(.bookable) {
     filter: grayscale(1) opacity(0.5);
   }

   img {
     display: block;
     width: 40%;
     flex-shrink: 0;
     object-fit: cover;
     background-color: #bbb;
     margin-right: 1em;
   }

   .info {
     padding: 1em;
   }

   .title {
     font-size: 1em;
     font-weight: bold;
     margin-bottom: 0.33em;
   }

   .cinema {
     margin-bottom: 1em;
   }

   a {
     text-decoration: none;
   }

  </style>
  <body></body>
</html>
